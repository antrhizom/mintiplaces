<!-- =========================
File path: docs/mathe/pythagoras.html
Single, interaktive Lernseite zu Pythagoras. Verlinkt nur zurück zur bestehenden Startseite (../index.html)
und zur bestehenden Mathematik-Übersicht (./index.html). Keine zusätzliche Startseite nötig.
========================= -->
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pythagoras – Interaktive Lernseite</title>
  <meta name="description" content="Satz des Pythagoras mit Rechner, Canvas‑Dreieck, Quiz und Aufgaben. Vollständig offline nutzbar." />
  <style>
    :root { --bg:#0b1220; --panel:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#94a3b8; --accent:#38bdf8; --ok:#22c55e; --warn:#facc15; --err:#ef4444; }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; color: var(--ink); background: radial-gradient(1200px 600px at 10% -20%, #0b2544, transparent), var(--bg); }
    header { position: sticky; top: 0; backdrop-filter: saturate(1.2) blur(8px); background: color-mix(in oklab, var(--bg) 85%, black 15%); border-bottom: 1px solid #1f2937; z-index: 10; }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 1rem; }
    nav a { color: var(--ink); text-decoration: none; padding: .5rem .75rem; border-radius: .6rem; display: inline-block; }
    nav a:hover, nav a[aria-current="page"] { background: #1f2937; color: white; }
    h1 { font-size: clamp(1.6rem, 2vw + 1rem, 2.4rem); margin: 1rem 0; }
    h2 { font-size: 1.2rem; margin: 1.2rem 0 .4rem; }
    .grid { display: grid; gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(290px, 1fr)); align-items: start; }
    .card { background: var(--card); border: 1px solid #1f2937; border-radius: 16px; padding: 1rem; box-shadow: 0 10px 24px rgba(0,0,0,.25); }
    .muted { color: var(--muted); }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; background:#0b2544; padding:.2rem .4rem; border-radius:.4rem; }
    label { display: block; margin-top: .5rem; }
    input[type="number"] { width: 100%; padding: .55rem .7rem; border-radius: .6rem; border: 1px solid #243041; background: #0a1426; color: var(--ink); }
    input[type="range"] { width: 100%; }
    button { cursor: pointer; padding: .6rem .9rem; border: 1px solid #243041; background: #0a1426; color: var(--ink); border-radius: .6rem; }
    button.primary { background: linear-gradient(180deg, #1e3a8a, #1f2937); border-color:#1e3a8a; }
    .tag { display:inline-block; padding:.2rem .5rem; border-radius: 999px; background:#0b2544; color: var(--accent); font-size:.85rem }
    details { background:#0a1426; border-radius:12px; border:1px solid #1f2937; padding:.6rem .8rem; }
    details summary { cursor:pointer; }
    .pill { border:1px solid #1f2937; background:#0a1426; padding:.2rem .5rem; border-radius:8px; }
    .good { color: var(--ok); }
    .bad { color: var(--err); }
    canvas { width: 100%; height: 280px; background: #0a1426; border-radius: 12px; border: 1px solid #1f2937; }
    .flex { display:flex; gap:.5rem; align-items:center }
    .sr-only { position:absolute; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }
    .footer { border-top:1px solid #1f2937; color:var(--muted); margin-top:2rem }
    .chip { display:inline-block; border:1px solid #1f2937; padding:.15rem .5rem; border-radius:999px; margin-right:.3rem }
    .quiz li { margin:.4rem 0 }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <nav aria-label="Navigation">
        <a href="../index.html">Start</a>
        <a href="./index.html">Mathe</a>
        <a href="./pythagoras.html" aria-current="page">Pythagoras</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <h1>Pythagoras <span class="tag">Rechtwinklige Dreiecke</span></h1>
    <p class="muted">Für ein rechtwinkliges Dreieck mit Katheten <span class="kbd">a</span>, <span class="kbd">b</span> und Hypotenuse <span class="kbd">c</span> gilt: <strong>a² + b² = c²</strong>.</p>

    <section class="grid" aria-label="Interaktive Werkzeuge">
      <!-- Rechner -->
      <article class="card" aria-labelledby="rech-h">
        <h2 id="rech-h">Pythagoras‑Rechner</h2>
        <p class="muted">Gib zwei Seiten an, die dritte wird berechnet.</p>
        <div class="grid" style="grid-template-columns:1fr 1fr;">
          <div>
            <label for="a">Kathete a</label>
            <input id="a" type="number" min="0" step="any" placeholder="z.B. 3" />
          </div>
          <div>
            <label for="b">Kathete b</label>
            <input id="b" type="number" min="0" step="any" placeholder="z.B. 4" />
          </div>
          <div>
            <label for="c">Hypotenuse c</label>
            <input id="c" type="number" min="0" step="any" placeholder="z.B. 5" />
          </div>
        </div>
        <div class="flex" style="margin-top:.8rem">
          <button class="primary" id="solve">Berechnen</button>
          <button id="clear">Zurücksetzen</button>
          <span id="check" class="pill" aria-live="polite"></span>
        </div>
        <p class="muted" style="margin-top:.5rem">Hinweis: Wenn <em>c</em> leer ist, wird <em>c = √(a² + b²)</em> berechnet. Wenn eine Kathete fehlt, wird sie via <em>√(c² − andere²)</em> berechnet.</p>
      </article>

      <!-- Canvas Triangle -->
      <article class="card" aria-labelledby="canvas-h">
        <h2 id="canvas-h">Dreieck zum Schieben</h2>
        <div class="grid" style="grid-template-columns:1fr 1fr; align-items:center">
          <label> a: <input id="ra" type="range" min="1" max="12" step="0.5" value="3" /></label>
          <label> b: <input id="rb" type="range" min="1" max="12" step="0.5" value="4" /></label>
        </div>
        <canvas id="tri" width="520" height="280" aria-label="Zeichnung eines rechtwinkligen Dreiecks"></canvas>
        <p class="muted">Die Fläche des Quadrats über der Hypotenuse (<span class="kbd">c²</span>) ist gleich der Summe der Flächen über den Katheten (<span class="kbd">a² + b²</span>).</p>
      </article>

      <!-- Quiz -->
      <article class="card" aria-labelledby="quiz-h">
        <h2 id="quiz-h">Mini‑Quiz</h2>
        <ol class="quiz">
          <li>
            <p>Ein rechtwinkliges Dreieck hat <em>a = 8</em>, <em>b = 6</em>. Wie groß ist <em>c</em>?</p>
            <div class="flex">
              <button data-q="1" data-a="10" class="ans">10</button>
              <button data-q="1" data-a="11">11</button>
              <button data-q="1" data-a="12">12</button>
            </div>
            <div id="q1" class="muted" aria-live="polite"></div>
          </li>
          <li>
            <p>Welche Aussage ist korrekt?</p>
            <div class="flex" style="flex-wrap:wrap">
              <button data-q="2" data-a="A" class="ans">Bei beliebigen Dreiecken gilt a²+b²=c²</button>
              <button data-q="2" data-a="B">Nur bei rechtwinkligen Dreiecken gilt a²+b²=c²</button>
            </div>
            <div id="q2" class="muted" aria-live="polite"></div>
          </li>
        </ol>
      </article>
    </section>

    <section class="grid" aria-label="Theorie & Aufgaben">
      <article class="card">
        <h2>Beweis‑Idee (anschaulich)</h2>
        <p>Lege auf jede Dreiecksseite ein Quadrat. Zerlege die beiden kleinen Quadrate in Teile, die sich lückenlos zum großen Quadrat zusammensetzen lassen. Diese Flächenargumentation zeigt: <strong>a² + b² = c²</strong>.</p>
        <details>
          <summary>Alternative: algebraisch mit ähnlichen Dreiecken</summary>
          <p>Im rechtwinkligen Dreieck sind das große Dreieck und die beiden durch die Höhe zur Hypotenuse entstehenden Teildreiecke ähnlich. Über Verhältnisgleichungen erhält man <span class="kbd">a² = c·p</span> und <span class="kbd">b² = c·q</span> mit <span class="kbd">p+q=c</span>, also <span class="kbd">a² + b² = c(p+q) = c²</span>.</p>
        </details>
      </article>
      <article class="card">
        <h2>Aufgaben zum Üben</h2>
        <ol>
          <li>
            <div class="flex" style="justify-content:space-between"><span>Dreieck mit a=9, b=12: Berechne c.</span><span class="chip">Erwartung: 15</span></div>
            <details><summary>Lösung</summary><p>c = √(9²+12²) = √(81+144) = √225 = 15</p></details>
          </li>
          <li>
            <div class="flex" style="justify-content:space-between"><span>Dreieck mit c=13, a=5: Berechne b.</span><span class="chip">Erwartung: 12</span></div>
            <details><summary>Lösung</summary><p>b = √(13²−5²) = √(169−25) = √144 = 12</p></details>
          </li>
          <li>
            <div class="flex" style="justify-content:space-between"><span>Prüfe, ob (7,24,25) ein rechtwinkliges Dreieck ist.</span><span class="chip">Erwartung: ja</span></div>
            <details><summary>Lösung</summary><p>7²+24²=49+576=625=25² ⇒ rechtwinklig.</p></details>
          </li>
        </ol>
      </article>
    </section>

    <p class="footer">© <span id="year"></span> – Datei: <code>docs/mathe/pythagoras.html</code></p>
  </main>

  <script>
    // ---------- Rechner ----------
    const A = document.getElementById('a');
    const B = document.getElementById('b');
    const C = document.getElementById('c');
    const check = document.getElementById('check');
    const solveBtn = document.getElementById('solve');
    const clearBtn = document.getElementById('clear');

    function toNum(x){ return x.value === '' ? NaN : Number(x.value); }
    function round(x){ return Math.round(x * 1000) / 1000; }

    function isRight(a,b,c){
      if([a,b,c].some(x=>!Number.isFinite(x))) return false;
      return Math.abs(a*a + b*b - c*c) < 1e-6; // tolerance
    }

    solveBtn?.addEventListener('click', () => {
      let a = toNum(A), b = toNum(B), c = toNum(C);
      const have = [!isNaN(a), !isNaN(b), !isNaN(c)].filter(Boolean).length;
      if(have < 2){ check.textContent = 'Bitte mindestens zwei Längen eingeben.'; check.style.color = 'var(--warn)'; return; }
      if(isNaN(c)) c = Math.sqrt(a*a + b*b);
      else if(isNaN(a)) a = Math.sqrt(c*c - b*b);
      else if(isNaN(b)) b = Math.sqrt(c*c - a*a);
      if([a,b,c].some(x=>!Number.isFinite(x))){ check.textContent = 'Ungültige Kombination – Hypotenuse muss die längste Seite sein.'; check.style.color = 'var(--err)'; return; }
      A.value = round(a); B.value = round(b); C.value = round(c);
      if(isRight(a,b,c)){ check.textContent = 'Passt: a² + b² = c²'; check.style.color = 'var(--ok)'; }
      else { check.textContent = 'Warnung: Kein rechtwinkliges Dreieck'; check.style.color = 'var(--warn)'; }
      // sync sliders & canvas
      ra.value = a; rb.value = b; draw();
    });

    clearBtn?.addEventListener('click', ()=>{ A.value = B.value = C.value = ''; check.textContent=''; });

    // ---------- Canvas Triangle ----------
    const ra = document.getElementById('ra');
    const rb = document.getElementById('rb');
    const canvas = document.getElementById('tri');
    const ctx = canvas.getContext('2d');

    function draw(){
      const a = Number(ra.value), b = Number(rb.value);
      const c = Math.hypot(a,b);
      // padding & scale to fit canvas
      const pad = 24; const w = canvas.width - 2*pad; const h = canvas.height - 2*pad;
      const s = Math.min(w/a, h/b);
      const ax = pad, ay = canvas.height - pad; // right angle at A
      const bx = ax + a*s, by = ay; // along x
      const cx = ax, cy = ay - b*s; // along y

      ctx.clearRect(0,0,canvas.width,canvas.height);
      // grid
      ctx.globalAlpha = .25; ctx.beginPath();
      for(let x=pad; x<canvas.width-pad; x+=20){ ctx.moveTo(x,pad); ctx.lineTo(x,canvas.height-pad); }
      for(let y=pad; y<canvas.height-pad; y+=20){ ctx.moveTo(pad,y); ctx.lineTo(canvas.width-pad,y); }
      ctx.strokeStyle = '#1f2937'; ctx.stroke(); ctx.globalAlpha = 1;
      // triangle
      ctx.beginPath(); ctx.moveTo(ax,ay); ctx.lineTo(bx,by); ctx.lineTo(cx,cy); ctx.closePath();
      ctx.fillStyle = '#0b2544'; ctx.strokeStyle = '#38bdf8'; ctx.lineWidth = 2; ctx.fill(); ctx.stroke();
      // right angle square
      ctx.beginPath(); ctx.moveTo(ax,ay); ctx.lineTo(ax+18,ay); ctx.lineTo(ax+18,ay-18); ctx.lineTo(ax,ay-18); ctx.closePath();
      ctx.fillStyle = '#1e293b'; ctx.fill();
      // labels
      ctx.fillStyle = '#e5e7eb'; ctx.font = '14px ui-monospace,monospace';
      ctx.fillText(`a = ${a}`, (ax+bx)/2, ay+18);
      ctx.fillText(`b = ${b}`, ax-36, (ay+cy)/2);
      ctx.fillText(`c = ${Math.round(c*100)/100}`, (bx+cx)/2 - 10, (by+cy)/2 - 6);
    }
    ra?.addEventListener('input', ()=>{ draw(); A.value = round(Number(ra.value)); });
    rb?.addEventListener('input', ()=>{ draw(); B.value = round(Number(rb.value)); });

    // ---------- Quiz ----------
    const out1 = document.getElementById('q1');
    const out2 = document.getElementById('q2');
    document.querySelectorAll('button[data-q]')?.forEach(btn => {
      btn.addEventListener('click', () => {
        const q = btn.getAttribute('data-q');
        const a = btn.getAttribute('data-a');
        if(q === '1'){
          if(a === '10'){ out1.innerHTML = '<span class="good">Richtig!</span> √(8²+6²)=√(100)=10'; }
          else { out1.innerHTML = '<span class="bad">Leider falsch.</span> Tipp: 6‑8‑10 ist ein klassisches Tripel.'; }
        }
        if(q === '2'){
          if(a === 'B'){ out2.innerHTML = '<span class="good">Korrekt:</span> Der Satz gilt nur für rechtwinklige Dreiecke.'; }
          else { out2.innerHTML = '<span class="bad">Nope – gilt nicht für beliebige Dreiecke.</span>'; }
        }
      });
    });

    // init
    document.getElementById('year').textContent = new Date().getFullYear();
    draw();
  </script>
</body>
</html>
